___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Easyfeedback Tracking Code",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAIAAAADnC86AAAACXBIWXMAAAsTAAALEwEAmpwYAAAHGmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2NzA3MzY4Zi1mNGZkLTYzNDktOWIxYi01ZmFkMTdlNDgyN2YiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDUwNTgzYTktNmY0NS00ZTE5LTgyMzUtZWUwY2ZhZWFhMzQzIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6Q0E2MDAzNzA3RUQzMTFFOTgzRDc4MDA2OEMyOTZDNzUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgSWxsdXN0cmF0b3IgQ1MzIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOS0wNi0wNFQxMTo1OTozMSswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTktMDctMDJUMTM6MDg6NDcrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMDctMDJUMTM6MDg6NDcrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0idXVpZDoxQTAyMjQzQ0M1QkRFODExOUVGNEY0QkQ0OTRFRTA2OCIgc3RSZWY6ZG9jdW1lbnRJRD0idXVpZDoxOTAyMjQzQ0M1QkRFODExOUVGNEY0QkQ0OTRFRTA2OCIvPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3YmQ0MThkMC1hNGZlLTRlZWUtYTFlYi1kMTE3N2U2ZjU0NTQiIHN0RXZ0OndoZW49IjIwMTktMDctMDJUMTM6MDg6NDcrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo0NTA1ODNhOS02ZjQ1LTRlMTktODIzNS1lZTBjZmFlYWEzNDMiIHN0RXZ0OndoZW49IjIwMTktMDctMDJUMTM6MDg6NDcrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8ZGM6dGl0bGU+IDxyZGY6QWx0PiA8cmRmOmxpIHhtbDpsYW5nPSJ4LWRlZmF1bHQiPkRydWNrPC9yZGY6bGk+IDwvcmRmOkFsdD4gPC9kYzp0aXRsZT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7bVje1AAAEk0lEQVRYhe3Yb0wbZRgA8Ofea68t/UcpJYOWXucxCAyHxJREBDSBOmOyhQ8aXZwrRBKSWWNIzL5NP2HGV42EGJfMxBjIxA9EFDYXjC4QGpiEKY4F+uf415XSFmhpr+Xu9UMjK6WUf/3I8+nu6XP93Xtv732flMAYQ/bCfe/Pxd/H1x4/9f87tx2NkZRIaSxSM8ai2pfPf/hOciWRLdgx8ODhja5oYD3tp1KN+tqTe8kZURZMjO+13HAN/ZGhRJqvSclkAf75bdvyw4nMNdI8dUoGnVCd6PrmQBUAKJUym3B4wfPXl3cOUynLz80m7OofQnE+QwEpocRyGQBINKmP+shz7PP53C6Xk3W7n3lE3/9yRkDrpLC3TP1C8etffa6rKseCsPb3U0qlSCnI9DpFIhGWZVmWXVxYcLndLqdzYXFx1evFGEcJrMCo1Z+j3UZbKPUbCITeHburMhkyDGDXiO12u9vtdjmdLMsuLi2xLBvjOAAIBAJ+vx8hpNPplEolxphD2MghDY9iRJr7Nr31WmY1Ff6is3Nubm7nVCwWb25uLi0tVVdXNzc3c7HYb/fvOxwOhmEEAucIhBgTsT3DBQDt+XOZ1VS4vKJiB0YI+f3+cDj87e3bVqs1kYxEIh9cvTo4OJhfcU4MgDCknSeZTns0mGGYnWOe51dXV7u7u61W68TERNetW00WS3t7e19fX0NDw7hzFisMGICANPbcT8OhRQ8X3ACA8LK37P3LpjcbMsHFhucTs+bzmc3mltZWr9dbX1cX5bgf+/vj8bjNZnvvypXRTz8Bxb6zuDL6aGX00c6ppuzsAbA+CV7f2DCbzQDQ09MT5biG+nqSJBOvgKWpSVFUGI1GAXL2s3cFQezN7Yb1eolUykWjAMDzfJ5WCwBtbW0dHR1K5fM1L7y1pVCq+NX4odR9Yhes0WgMev38/DwAIITCoVAiOTk5ybLs4+lph8Phdrt9Ph+WieQKOQSyBAOA0WhMwDKZbGZmBgAEQbh86VIgGBSRpIgko7EYRVG68hIUO/Rym26NSgMnDnQ63ejoqN1ur6mp6e3tbWlpCQQCubm5jY2NZaWlX9/9IRYnAKRpIW1l6ZmaC1xwEwBCSx7ti6VHgKVS6crKymc3bw4ND79x8eKT2VmX00mbTGq1OhgMfvfrQMjjA0jd7BLBNFte+vjavg8AAPbuTjuwIAgMw4yMjFgslunpaZVKdaGqSq1Wj42N2Wy2tbW15J9bahyinUodcfH/MADwPF9eXm4fH3+1trayslIikXg8HqfTSVGUuoQWbZ2oe0m9uLCwsKCgwOv1AgDGeHt7m6bpeDzOsqzA87KcnJKSEhFCy5gPEcJJNvNUmCTJoqKiBJwIQRBIktRoNBRF6fV6g8FQfNb0Sn0dN/7PRuedNFvx8WAAMNL01NRUXl4eTdMmk8lI08UGg5GmaZqWy+U7Zc9CaCBdC3B8+KPr11tbWxmGQSjTs4zGYwJAmsXw2HDyip0hBMDHVuHk7e0pfAqfwqfwKXyIwMK+bcZh/tA5fhdBUmIAEMmkBJl09xjHwxFSQh14+X+Eotyn+kXwoAAAAABJRU5ErkJggg\u003d\u003d"
  },
  "description": "Official easyfeedback trackingcode",
  "categories": ["SURVEY"],
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "trackingId",
    "displayName": "Your easyfeedback tracking ID",
    "simpleValueType": true,
    "help": "Check your tracking id from your easyfeedback account \u003e accountdata \u003e integration \u003e trackingcode",
    "notSetText": "You must enter a valid ID"
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const injectScript = require('injectScript');
const logToConsole = require('logToConsole');
const queryPermission = require('queryPermission');
const encodeUriComponent = require('encodeUriComponent');

const trackingId = data.trackingId;

const url = 'https://indivsurvey.de/integration.js?id=' + encodeUriComponent(trackingId);

const log = data.debug ? logToConsole : (() => {});

if (queryPermission('inject_script', url)) {
	injectScript(url, data.gtmOnSuccess, data.gtmOnFailure);
 } else {
  log('Ef: Script load failed due to permissions mismatch.');
  data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.indivsurvey.de/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___




